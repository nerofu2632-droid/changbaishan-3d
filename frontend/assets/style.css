html,body,#map{height:100%;margin:0}
#map{position:absolute;inset:0}

#ui{
  position:absolute;left:12px;top:12px;z-index:20;
  background:#fff9;border:1px solid #e5e7eb;border-radius:12px;
  padding:10px 12px;font-family:system-ui;backdrop-filter:blur(4px)
}
.title{font-weight:700;margin-bottom:6px}
.row{display:flex;gap:8px;align-items:center;margin-top:6px;flex-wrap:wrap}
button{padding:6px 10px;border-radius:8px;border:0;background:#3e7aff;color:#fff;cursor:pointer}
button.ghost{background:#fff;color:#334155;border:1px solid #cbd5e1}
.small{font-size:12px;color:#64748b}

/* 右下角图例（可拖拽） */
.legend{
  position:absolute;right:12px;bottom:12px;z-index:10;
  background:#fff9;border:1px solid #e5e7eb;border-radius:12px;
  padding:8px 12px;font-family:system-ui;min-width:230px;max-width:280px;
  box-shadow:0 6px 18px rgba(0,0,0,.06);
}
.legend-header{
  font-weight:600; cursor:move; user-select:none;
  padding:2px 0;
}
.legend .bar{
  width:220px;height:12px;border-radius:8px;margin:6px 0;
  background:linear-gradient(90deg,#2c7bb6,#abd9e9,#ffffbf,#fdae61,#d7191c);
}
.warn{
  margin-top:6px;padding:6px 8px;border-radius:8px;
  border:1px solid #fecaca;background:#fff1f2;color:#b91c1c;
}

/* 拖拽时禁用选择，避免选中文字 */
body.dragging{ user-select:none; }
#btnAdd.active{outline:2px solid #3e7aff; outline-offset:1px}
